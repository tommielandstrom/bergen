(function(e,t,n,r){"use strict";Foundation.libs.tooltip={name:"tooltip",version:"5.2.1",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"body",touch_close_text:"Tap To Close",disable_for_touch:!1,hover_delay:200,tip_template:function(e,t){return'<span data-selector="'+e+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'">'+t+'<span class="nub"></span></span>'}},cache:{},init:function(e,t,n){Foundation.inherit(this,"random_str");this.bindings(t,n)},events:function(t){var n=this,r=n.S;n.create(this.S(t));e(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"]:not(a)",function(t){var i=r(this),s=e.extend({},n.settings,n.data_options(i)),o=!1;if(/mouse/i.test(t.type)&&n.ie_touch(t))return!1;if(i.hasClass("open")){Modernizr.touch&&/touchstart|MSPointerDown/i.test(t.type)&&t.preventDefault();n.hide(i)}else{if(s.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(t.type))return;if(!s.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(t.type)){t.preventDefault();r(s.tooltip_class+".open").hide();o=!0}if(/enter|over/i.test(t.type))this.timer=setTimeout(function(){var e=n.showTip(i)}.bind(this),n.settings.hover_delay);else if(t.type==="mouseout"||t.type==="mouseleave"){clearTimeout(this.timer);n.hide(i)}else n.showTip(i)}}).on("mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"].open",function(t){if(/mouse/i.test(t.type)&&n.ie_touch(t))return!1;if(e(this).data("tooltip-open-event-type")=="touch"&&t.type=="mouseleave")return;e(this).data("tooltip-open-event-type")=="mouse"&&/MSPointerDown|touchstart/i.test(t.type)?n.convert_to_touch(e(this)):n.hide(e(this))}).on("DOMNodeRemoved DOMAttrModified","["+this.attr_name()+"]:not(a)",function(e){n.hide(r(this))})},ie_touch:function(e){return!1},showTip:function(e){var t=this.getTip(e);return this.show(e)},getTip:function(t){var n=this.selector(t),r=e.extend({},this.settings,this.data_options(t)),i=null;n&&(i=this.S('span[data-selector="'+n+'"]'+r.tooltip_class));return typeof i=="object"?i:!1},selector:function(e){var t=e.attr("id"),n=e.attr(this.attr_name())||e.attr("data-selector");if((t&&t.length<1||!t)&&typeof n!="string"){n=this.random_str(6);e.attr("data-selector",n)}return t&&t.length>0?t:n},create:function(n){var r=this,i=e.extend({},this.settings,this.data_options(n)),s=this.settings.tip_template;typeof i.tip_template=="string"&&t.hasOwnProperty(i.tip_template)&&(s=t[i.tip_template]);var o=e(s(this.selector(n),e("<div></div>").html(n.attr("title")).html())),u=this.inheritable_classes(n);o.addClass(u).appendTo(i.append_to);if(Modernizr.touch){o.append('<span class="tap-to-close">'+i.touch_close_text+"</span>");o.on("touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip",function(e){r.hide(n)})}n.removeAttr("title").attr("title","")},reposition:function(t,n,r){var i,s,o,u,a,f;n.css("visibility","hidden").show();i=t.data("width");s=n.children(".nub");o=s.outerHeight();u=s.outerHeight();this.small()?n.css({width:"100%"}):n.css({width:i?i:"auto"});f=function(e,t,n,r,i,s){return e.css({top:t?t:"auto",bottom:r?r:"auto",left:i?i:"auto",right:n?n:"auto"}).end()};f(n,t.offset().top+t.outerHeight()+10,"auto","auto",t.offset().left);if(this.small()){f(n,t.offset().top+t.outerHeight()+10,"auto","auto",12.5,e(this.scope).width());n.addClass("tip-override");f(s,-o,"auto","auto",t.offset().left)}else{var l=t.offset().left;if(Foundation.rtl){s.addClass("rtl");l=t.offset().left+t.outerWidth()-n.outerWidth()}f(n,t.offset().top+t.outerHeight()+10,"auto","auto",l);n.removeClass("tip-override");if(r&&r.indexOf("tip-top")>-1){Foundation.rtl&&s.addClass("rtl");f(n,t.offset().top-n.outerHeight(),"auto","auto",l).removeClass("tip-override")}else if(r&&r.indexOf("tip-left")>-1){f(n,t.offset().top+t.outerHeight()/2-n.outerHeight()/2,"auto","auto",t.offset().left-n.outerWidth()-o).removeClass("tip-override");s.removeClass("rtl")}else if(r&&r.indexOf("tip-right")>-1){f(n,t.offset().top+t.outerHeight()/2-n.outerHeight()/2,"auto","auto",t.offset().left+t.outerWidth()+o).removeClass("tip-override");s.removeClass("rtl")}}n.css("visibility","visible").hide()},small:function(){return matchMedia(Foundation.media_queries.small).matches},inheritable_classes:function(t){var n=e.extend({},this.settings,this.data_options(t)),r=["tip-top","tip-left","tip-bottom","tip-right","radius","round"].concat(n.additional_inheritable_classes),i=t.attr("class"),s=i?e.map(i.split(" "),function(t,n){if(e.inArray(t,r)!==-1)return t}).join(" "):"";return e.trim(s)},convert_to_touch:function(t){var n=this,r=n.getTip(t),i=e.extend({},n.settings,n.data_options(t));if(r.find(".tap-to-close").length===0){r.append('<span class="tap-to-close">'+i.touch_close_text+"</span>");r.on("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tooltip.tapclose",function(e){n.hide(t)})}t.data("tooltip-open-event-type","touch")},show:function(e){var t=this.getTip(e);e.data("tooltip-open-event-type")=="touch"&&this.convert_to_touch(e);this.reposition(e,t,e.attr("class"));e.addClass("open");t.fadeIn(150)},hide:function(e){var t=this.getTip(e);t.fadeOut(150,function(){t.find(".tap-to-close").remove();t.off("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tapclose");e.removeClass("open")})},off:function(){var t=this;this.S(this.scope).off(".fndtn.tooltip");this.S(this.settings.tooltip_class).each(function(n){e("["+t.attr_name()+"]").get(n).attr("title",e(this).text())}).remove()},reflow:function(){}}})(jQuery,this,this.document);